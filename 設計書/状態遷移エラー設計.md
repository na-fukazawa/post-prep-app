# ライブ告知 半自動投稿アプリ 状態遷移・エラー設計（v1）

## 1. 状態定義

| 状態 | 説明 |
| --- | --- |
| draft | 下書き |
| scheduled | 予約済み |
| posted | 投稿済み |
| failed | 投稿失敗 |

---

## 2. 状態遷移

### 2.1 基本遷移

```
draft -> scheduled -> posted
draft -> failed
scheduled -> failed
failed -> scheduled
```

### 2.2 遷移条件

* draft -> scheduled
  * 公開予約を保存
* scheduled -> posted
  * 「投稿完了としてマーク」押下
* draft/scheduled -> failed
  * 共有起動失敗、外部アプリ起動失敗
* failed -> scheduled
  * 再試行成功

---

## 3. エラー分類

### 3.1 通知関連

* 通知権限が拒否
  * 設定画面に誘導
* 通知スケジュール失敗
  * トーストで再試行案内

### 3.2 共有/外部連携

* Xの起動失敗
* Instagramの起動失敗
* 共有シート起動失敗
* 共有中に画像ファイル参照エラー

### 3.3 入力/保存

* 必須項目未入力（タイトル/本文/公開日時/対象SNS）
* 公開日時が過去
* URL形式エラー

---

## 4. エラー表示方針

* 重大: ダイアログで通知
* 軽微: トースト/スナックバー
* バリデーション: 入力欄の下にエラーメッセージ表示

---

## 5. 空状態

### 5.1 告知一覧

* 文言例: 「まだ告知がありません。新規作成から追加しましょう。」

### 5.2 カレンダー

* 文言例: 「この日に予定はありません。」

### 5.3 投稿詳細

* 画像がない場合はプレースホルダー表示

---

以上
